<div class="page">

  <!-- ===== TOP BAR ===== -->
   <div class="page-header">
    <h2 class="page-title">Liste des suggestions</h2>

    <!-- ‚úÖ lien absolu stable -->
   
    <button class="btn primary" [routerLink]="['/suggestions/new']">+ Nouvelle suggestion</button>
  </div>


  <!-- ===== SEARCH ===== -->
  <div class="search-bar">
    <input
      type="text"
      [(ngModel)]="searchText"
      placeholder="Rechercher une suggestion (titre ou cat√©gorie)"
    />
  </div>


  <!-- ===== GRID CARDS ===== -->
  <div class="grid">

    <div class="card"
         *ngFor="let s of suggestions"
         [hidden]="!matchesSearch(s)">

      <!-- Status badge -->
      <span class="status"
            [ngClass]="{
              'ok': s.status === 'acceptee',
              'wait': s.status === 'en_attente',
              'no': s.status === 'refusee'
            }">
        {{ s.status }}
      </span>

      <!-- Title -->
      <h3 class="title">{{ s.title }}</h3>

      <!-- Meta -->
      <div class="meta">
        <span class="cat">{{ s.category }}</span>
        <span class="date">{{ s.date | date:'dd MMM yyyy' }}</span>
      </div>

      <!-- Description -->
      <p class="desc">
        {{ s.description }}
      </p>

      <!-- Actions -->
      <div class="actions">

        

        <button class="btn primary" [routerLink]="['/suggestions/details', s.id]">Details</button>
        <button class="btn"
                (click)="likeSuggestion(s)"
                [disabled]="!canInteract(s)">
          üëç Like {{ s.nbLikes }}
        </button>

        <button class="btn"
                (click)="addToFavorites(s)"
                [disabled]="!canInteract(s)">
          ‚≠ê Favoris
        </button>

      </div>

    </div>
  </div>


  <!-- ===== FAVORITES SECTION ===== -->
  <div class="favorites">

    <h3>
      ‚≠ê Favoris ({{ favorites.length }})
    </h3>

    <div *ngIf="favorites.length === 0" class="empty">
      Aucune suggestion en favoris pour le moment.
    </div>

    <ul *ngIf="favorites.length > 0">
      <li *ngFor="let f of favorites">
        <span class="fav-title">{{ f.title }}</span>
        <span class="fav-cat">({{ f.category }})</span>
      </li>
    </ul>

  </div>

</div>