<div class="page">
  <div class="page-header">
    <h2>Liste des suggestions</h2>

    <!-- âœ… RELATIF au module -->
    <button class="btn primary" [routerLink]="['new']">+ Nouvelle suggestion</button>
  </div>

  <div class="search-bar">
    <input [(ngModel)]="searchText" placeholder="Rechercher (titre/catÃ©gorie)" />
  </div>

  <div class="grid">
    <div class="card" *ngFor="let s of suggestions">
      <ng-container *ngIf="matchesSearch(s)">
        <span class="status"
              [ngClass]="{
                'ok': s.status === 'acceptee',
                'wait': s.status === 'en_attente',
                'no': s.status === 'refusee'
              }">
          {{ s.status }}
        </span>

        <h3>{{ s.title }}</h3>

        <div class="meta">
          <span>{{ s.category }}</span>
          <span>{{ s.date | date:'dd MMM yyyy' }}</span>
        </div>

        <p>{{ s.description }}</p>

        <div class="actions">
          <!-- âœ… RELATIF -->
          <button class="btn primary" [routerLink]="['details', s.id]">Details</button>

          <button class="btn" (click)="deleteSuggestion(s.id)" [disabled]="!canInteract(s)">
            ğŸ—‘ Supprimer
          </button>

          <button class="btn" (click)="likeSuggestion(s)" [disabled]="!canInteract(s)">
            ğŸ‘ Like {{ s.nbLikes }}
          </button>

          <button class="btn" (click)="addToFavorites(s)" [disabled]="!canInteract(s)">
            â­ Favoris
          </button>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="favorites">
    <h3>â­ Favoris ({{ favorites.length }})</h3>

    <div *ngIf="favorites.length === 0">Aucun favori.</div>

    <ul *ngIf="favorites.length > 0">
      <li *ngFor="let f of favorites">{{ f.title }} ({{ f.category }})</li>
    </ul>
  </div>
</div>