<div class="page">
  <a class="back-link" [routerLink]="['../']">← Back to list</a>

  <h1 class="page-title">{{ isEditMode ? 'Update suggestion' : 'Add new suggestion' }}</h1>

  <form class="card" [formGroup]="form" (ngSubmit)="save()">

    <!-- Title -->
    <div class="field">
      <label class="label">Title</label>
      <input
        class="input"
        type="text"
        formControlName="title"
        placeholder="Ex: Moderniser l’interface utilisateur"
      />
      <div class="error" *ngIf="isInvalid('title')">
        <span *ngIf="form.get('title')?.errors?.['required']">Title is required.</span>
        <span *ngIf="form.get('title')?.errors?.['minlength']">Min 3 characters.</span>
        <span *ngIf="form.get('title')?.errors?.['maxlength']">Max 60 characters.</span>
      </div>
    </div>

    <!-- Description -->
    <div class="field">
      <label class="label">Description</label>
      <textarea
        class="textarea"
        rows="5"
        formControlName="description"
        placeholder="Décris ta suggestion…"
      ></textarea>
      <div class="error" *ngIf="isInvalid('description')">
        <span *ngIf="form.get('description')?.errors?.['required']">Description is required.</span>
        <span *ngIf="form.get('description')?.errors?.['minlength']">Min 10 characters.</span>
        <span *ngIf="form.get('description')?.errors?.['maxlength']">Max 500 characters.</span>
      </div>
    </div>

    <!-- Category -->
    <div class="field">
      <label class="label">Category</label>
      <input
        class="input"
        type="text"
        formControlName="category"
        placeholder="Ex: Technologie"
      />
      <div class="error" *ngIf="isInvalid('category')">
        <span *ngIf="form.get('category')?.errors?.['required']">Category is required.</span>
        <span *ngIf="form.get('category')?.errors?.['minlength']">Min 2 characters.</span>
      </div>
    </div>

    <!-- Date -->
    <div class="field">
      <label class="label">Date</label>
      <input class="input" type="date" formControlName="date" />
      <div class="error" *ngIf="isInvalid('date')">
        <span *ngIf="form.get('date')?.errors?.['required']">Date is required.</span>
      </div>
    </div>

    <!-- Status -->
    <div class="field">
      <label class="label">Status</label>
      <select class="select" formControlName="status">
        <option value="en_attente">en_attente</option>
        <option value="acceptee">acceptee</option>
        <option value="refusee">refusee</option>
      </select>
      <div class="error" *ngIf="isInvalid('status')">
        <span *ngIf="form.get('status')?.errors?.['required']">Status is required.</span>
      </div>
    </div>

    <!-- Actions -->
    <div class="actions">
     <h2>{{ isEditMode ? 'Update suggestion' : 'Add new suggestion' }}</h2>

<button class="btn primary" type="submit">
  {{ isEditMode ? 'Save update' : 'Add suggestion' }}
</button>
      <button class="btn" type="button" (click)="cancel()">
        Cancel
      </button>
    </div>

  </form>
</div>