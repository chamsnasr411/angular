<h1 class="title">Liste des suggestions</h1>

<input
  class="search"
  type="text"
  [(ngModel)]="searchText"
  placeholder="Rechercher une suggestion"
/>

<div class="card" *ngFor="let s of suggestions">
  <ng-container *ngIf="matchesSearch(s)">

    <div class="card-head">
      <h3 class="card-title">{{ s.title }}</h3>
      <span
        class="badge ok"
        *ngIf="s.status === 'acceptee'"
      >ACCEPT√âE</span>

      <span
        class="badge ko"
        *ngIf="s.status === 'refusee'"
      >REFUS√âE</span>

      <span
        class="badge wait"
        *ngIf="s.status === 'en_attente'"
      >EN ATTENTE</span>
    </div>

    <div class="meta">
      <span class="cat">{{ s.category }}</span>
      <span class="sep">|</span>
      <span>{{ s.date | date:'dd MMM yyyy' }}</span>
    </div>

    <p class="desc">{{ s.description }}</p>

    <div class="actions" *ngIf="canInteract(s)">
      <button class="btn primary" (click)="likeSuggestion(s)">
        üëç Like {{ s.nbLikes }}
      </button>

      <button class="btn" (click)="addToFavorites(s)">
        ‚≠ê Ajouter aux favoris
      </button>
    </div>

  </ng-container>
</div>

<div class="favorites" *ngIf="favorites.length > 0">
  <h3>Favoris ({{ favorites.length }})</h3>
  <ul>
    <li *ngFor="let f of favorites">{{ f.title }} ({{ f.category }})</li>
  </ul>
</div>
